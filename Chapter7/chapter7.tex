\chapter{Συμπεράσματα}
\label{chapter:chap7}

\section{VQ H.264 vs JM H.264}
\label{section:sect63}

\indent Από το Σχήμα~\ref{fig:compare1} βλέπουμε πως ο VQ H.264 χρησιμοποιεί κατά μέσο όρο 17\% λιγότερα bits από τον JM H.264 στα βίντεο που δοκιμάστηκε. Επίσης φαίνεται να έχουμε ακόμα μεγαλύτερο κέρδος στα βίντεο που περιέχουν γρήγορη κίνηση, πράγμα που τα κάνει δύσκολο να κωδικοποιηθούν, τέτοια βίντεο είναι τα test1,test3 με κέρδος 27\% και 31\% αντίστοιχα. Σε αντίθεση στα βίντεο test2,test4,test5 που δεν δυσκολεύουν ιδιαίτερα τον encoder παρατηρούμε ότι είναι μικρότερο.

\indent Θα πρέπει να λάβουμε υπόψιν μας ότι το VQ έχει πολλά περιθώρια βελτίωσης αν μεγαλώσουμε το training set. Με το τρέχον training set είδαμε πως σε κάποια βίντεο και ειδικά στα I frames δεν έχουμε καλή απόδοση του VQ. Αυτό μπορεί να βελτιωθεί απλά και μόνο συμπεριλαμβάνοντας αυτά ή παραπλήσια βίντεο στο training set. Το θετικό σε αυτή την διαδικασία είναι ότι δεν χρειάζεται να τρέξουμε το training από την αρχή, αρκεί να δώσουμε σαν αρχικά clusters αυτά που ήδη έχουμε και έτσι να γλιτώσουμε την αρχικοποίηση αλλά και πολλά iterations του αλγορίθμου. Επομένως μπορούμε να πούμε πως ένας encoder που δουλεύει με VQ θα μπορεί να ανανεώνει τα codebooks του ανά κάποιο χρονικό διάστημα και θα επιλέγει αυτά που το βίντεο κωδικοποιήθηκε μέσω κάποιου version header μέσα στο βίντεο.

\indent Ένα πρόβλημα που παρατηρούμε είναι η μεγάλη ανομοιομορφία του PSNR μεταξύ I,P,B αλλά και Y,UV. Δηλαδή βλέπουμε στο βίντεο test1 ότι το I είναι στα 35dB ενώ τα P,B στα 43dB,45dB αντίστοιχα. Αυτή η διαφορά είναι αρκετά μεγάλη και για να μειωθεί θα μπορούσαν να χρησιμοποιηθούν codebooks με διαφορετικό μέγεθος για κάθε συνιστώσα I,P,B|Y,UV. Έτσι λοιπόν αν χρησιμοποιούσαμε Inter codebook μήκους 32768 για το test1 θα χρειάζονταν λιγότερα bits για να αποθηκευτούν για να αποθηκευτούν τα $VQ_{indices}$ αλλά ταυτόχρονα θα μειωνόταν και το PSNR, αρά λοιπόν στο VQ το μέγεθος του codebook $k$ λειτουργεί σαν ρυθμιστής ποιότητας παίζοντας τον ρόλο που παίζει το QP στο scalar quantization. Μετρήσεις πάνω σε αυτόν το τομέα δεν έγιναν αλλά αφήνονται σαν μια πολύ σημαντική προσθήκη για την ολοκλήρωση του VQ H.264.

\indent Όπως βλέπουμε στο Σχήμα~\ref{fig:compare2} βλέπουμε ότι ο VQ Encoder είναι 3.5 φορές πιο αργός από τον JM,αυτό οφείλεται στο κόστος του αλγορίθμου FastNN. Από την άλλη μεριά βλέπουμε ότι ο VQ Decoder στο Σχήμα~\ref{fig:compare3} είναι στα ίδια επίπεδα με τον JM Decoder. Αυτό που μας ενδιαφέρει είναι να έχουμε γρήγορους decoders γιατί μπαίνουν σε φορητές συσκευές που μας ενδιαφέρει η ενεργειακή απόδοση. Έτσι ένας VQ Decoder μπορεί να βελτιστοποιηθεί χρησιμοποιώντας μικρές και γρήγορες μνήμες όπου θα αποθηκεύονται τα codebooks. Ένα ενεργοβόρο και ακριβό βοηθητικό κύκλωμα που επιταχύνει την διαδικασία του αντίστροφου μετασχηματισμού και της αντίστροφης κβαντοποίησης μετατρέπεται σε μια γρήγορη, χαμηλής κατανάλωσης, φθηνή μνήμη.

\section{Πιθανές προσθήκες}
\label{section:sect63}

\indent Επειδή το VQ έδειξε σε αυτή την διπλωματική εργασία ότι αξίζει παραπάνω προσοχή, παραθέτω παρακάτω κάποιες ιδέες που θα το κάνουν πιο αποδοτικό.

\begin{itemize}

    \item Χρήση διαφορετικού μεγέθους codebooks για τις διάφορες συνιστώσες Y,UV, καθώς και παραγωγή codebooks για διάφορες ποιότητες ($k$).

    \item Προσαρμογή του πυρήνα του JM H.264 έτσι ώστε στον encoder να μην γίνεται μετασχηματισμός και κβαντοποίηση αλλά απευθείας VQ και έπειτα να κωδικοποιούνται τα $VQ_{indices}$ με την χρήση των contexts και την σωστή χρήση κωδικοποιητή εντροπίας. Έτσι, ο decoder θα δέχεται μόνο ένα αρχείο με τα $VQ_{indices}$ κωδικοποιημένα εντός του αρχείου H.264 και θα παράγει το αποκωδικοποιημένο βίντεο.

    \item Παραγωγή του training set από βίντεο που έχουν παραχθεί από VQ H.264, κατά αυτόν τον τρόπο αναμένουμε την παραγωγή καλύτερης ποιότητας codebook τα οποία μπορούν με την σειρά τους να παράγουν ακόμα καλύτερης ποιότητας training set τα οποία θα συγκλίνουν μετά από έναν συγκεκριμένο αριθμό επαναλήψεων.
    
    Δοκιμή παραγωγής του training set από βίντεο που έχουν ήδη κωδικοποιηθεί με την χρήση VQ. Χρήση αυτών των νέων codebooks για να γίνει VQ και πάλι στο βίντεο για να δειχθεί αν έτσι βελτιώνεται η ποιότητα του VQ. Μπορεί αυτό το loop να χρειαστεί να γίνει παραπάνω από μία φόρες
\end{itemize}

\indent Όλοι οι κώδικες τις διπλωματικής αυτής εργασίας βρίσκονται στα παρακάτω git repositories.
\begin{itemize}
    \item \url{https://github.com/petrkalos/vq}, Όλα τα εργαλεία για το training και τα contexts statistics. Περιλαμβάνει ένα Visual Studio 2010 Solution με 4 Project και κάποια αρχεία MatLab.

    \item \url{https://github.com/petrkalos/jm}, Ο VQ H.264.
\end{itemize} 